import http from 'k6/http';
import { check } from 'k6';
import { SharedArray } from 'k6/data';

// // Predefined array of identity commitments
// // Sepolia
// const identityCommitments = new SharedArray('identityCommitments', function () {
//   return [
//     "0x04c078aecf167bd3c9d34bbff2f50ff53e15a48977fb55cf7ef4189da18fb005",
//     "0x13314c6519c8fb5b497ed8bdc358febb23324826b8076cb670eb5f32e7633b1a",
//     "0x01d842d4d9eb41b687e3e3dac314190e5c84b479b3caaf547120f1c1b0829068",
//     "0x14c241bb7aaa404dedebb39ce8cc71261d73b949fcf4bbf4c9b0bbbd7c01f155",
//     "0x2b777c9b005e963cd45c8c41515e6640f107f0b48a986d8a4cbecd6ee822adfd",
//     "0x01cdfe6f7682c8904ac06d518438da3193af0d5b70d752bb96c86811ed5e3801",
//     "0x10391422e465a19bac708ef17a5ea20e44b1dc36e7b140361fc94a9b9ef7871d",
//     "0x111cafedafda852c408e81dbc05789d20dcaf8d189a2a13d0aaf99005290cd2f",
//     "0x22e48d25826b4df7e377bccd822c23fad50216638f22fd6b66fe081819077b80",
//     "0x05bbcd5c60aeac4fcf5e4a9392822af5c68a47d10b6d71383092d4c2767b4a22",
//     "0x20bf5877807afe4dd46117f546c6e4abaa570e87d822de79c097003182a225bd",
//     "0x1f38e5bb5a2c9a24394c731bd0019059afda90c3630a42080e8ae1f00cc990c0",
//     "0x026c1e9f7fbfdfd018b436181924d825d91d1f0ee728738ec5210935ac880cf7",
//     "0x22dd9698092ac90cebacc95bd8962e2196d66c74c8f7b4f13c3e2b8f23b0365d",
//     "0x1133046dcab2fc0262dee6feffb155d53e6ea8e33a7261720a02c520545f2f09",
//     "0x0f4a64afe240db3024fa5ffbf606634e5e0b3401f59d1031a891389c5c6a3b48",
//     "0x1caf326a84cd2674df382ba42b5e052bbe54170b175427148599f82f9a82a91d",
//     "0x086ccfdf7b66f818fc8687a4fbde2dd128f7371785920e9cb21bb219672cb7c8",
//     "0x0e4f7120be3607cd32ad28bb3f0cfc6beafc9c4d2f4c5c6c9194e650ccf354d7",
//     "0x2e535e66c507acbcc7887256d8bd6c83b7ab04920a260137e9aede4e464a9e52",
//     "0x0516a2eceb9b3367d0ccff9ec0ddd972aaf6246aa2d5cf645b0208bb6661c821",
//     "0x2da13664e17a1473bc1e357333ff793bea296b0c3a51f3bb90542f2d3f8cfc59",
//     "0x007b7316bca2e0da5ea0932fcba73a496d9a4dbb5d46968ce61fbe7459a49097",
//     "0x0feb17a3853ba4a3fdb785005f154a33fa27e399d8e5a105e08c0c85a845d941",
//     "0x1269c3b3d8c49dfad2ee856ed015ec52ef8d271fc4dbb02a20a74e2048fcafe2",
//     "0x1982c3c14074bf73eaee435bf81bee2ef0810ec1abce354c5ec29cf05a6ec009",
//     "0x0e02fd7a0a82a486f5b1f7cdd4413c1f7c355b351cd7038746ceacaf6f62a658",
//     "0x169084d7f7130d9bbdf3711b4c3ff5b009173b172cd31b25bab56d3137466ba2",
//     "0x28bd90ba81c14be70444757f8e84e685062eb94ff76a13a6c3df9701b3ade800",
//     "0x0f1e954b29ac22e9f32de017ca32f233bb72e69b813feeedf336bce7706dc3b4",
//     "0x21701196735480bd458b9cc6d92d46a739f188877a1e223f52afbd8ed6a9955b",
//     "0x067916fd2e2d38749cf2c03116254d4e489d82e3af0f006ab67a03b7df7dfb39",
//     "0x02d10d932077d98dcdb5b148ca8ba9f58abd653e30e1bad37d70ff58abae51f6",
//     "0x223273b507af47b440223beadbfde1fd920dce9359aaee0dc12d225b4f580483",
//     "0x084e5063825dfef28e37d07a9d1626e3b1e05809667c8b0b28a86b5b33dc27cf",
//     "0x035d7c83b08dcb2629e69b37ca908722a441990bac3f408be293a588b74eb341",
//     "0x304415e4b83411f4ddb66f7dc28892ba6f0ee8d4c26d097b6ea226a2c061f24e",
//     "0x018e9c28fd8cf53c60e098fbfacdbbfc5bec6fa494d5a8373fb7ee6f2fb0977a",
//     "0x1a1a8f91c21845ac1f8788dbc6a9408952b429c99a91bdb9d79f46e9f7984bda",
//     "0x18f78c26a239a9aed766efde1eb8d65be2393866bd3738d0c5eb78b6a9d27824",
//     "0x27ce275d303117e714d2ff304a4af120b64da1e66c5d8f1838cc17bae0ca82f3",
//     "0x0f3986458c66460ae9c6573ac41d5d67ce0724dd52ffb35cce4ac0a72aadb926",
//     "0x231a69e1b9ba13aeb723d7fa7c3864147a491490d1084f1077ec7cf12719ebf6",
//     "0x0a7e79bf0ac35a851b66fd760e6f9804c1fadbbd7c1d07069673c120bdd174ba",
//     "0x0b4c39d52c0ed43b4be16d032b8ca9dfe19bd9e4d82ba3f1c4cb4d75805f27b8",
//     "0x0030e1e5da225352ba624e1e672f1bbb0fca6c467ed3459dfba40ad5f49b0184",
//     "0x2b97510c4725979553b1b16635867c2b3f5990d824ad43bba3261828136facd5"
//   ];
// });



// Mainnet
// Predefined array of identity commitments
const identityCommitments = new SharedArray('identityCommitments', function () {
  return [
    "0x295b1d5c280e9d394524d039518502f6d800879ebaf7761fc6dd202c4c3f7aec",
    "0x2fd18bb0a9f7be0eb61301a3bbbc18e693678f1afbfe2375a8de133573451069",
    "0x3017972d13a39795ad0d1c3a670d3d36a399b4435e61a510c2d57713d4f5c3de",
    "0x2793fc16cbd7b3340525b40bb46c1d7e4536ea6e1af9d96e13edd06052aaba63",
    "0x203076db00ee869e7d8b848999e3761c5344ec32335228be731c3f3294148f33",
    "0x052a4ed7e8b1d45aed68aea3390395edac173932bf7a0f28daf94e1224a989a3",
    "0x0d637484e6adeee6b1700f86941db1b1c4e9576907bea992a127f5eb0e846a13",
    "0x003fac199f41117e77780e868615e7083d155606e6e3e5409aedcda294cb69ab",
    "0x014d04aa5f66fad6c499d775ff6d930e14c81940274bb00ef5814cc0b5df15ae",
    "0x2e72b4b629a0c6eaf316b61831d38bff92143d66da4b3197055519c4bfb0db0e",
    "0x15b02433805587152a55a0c4d1d44ceedf4dbfe97106e6c5578f97af8dcaa444",
    "0x2bbcfeec5f3e3d118a131debf9d406cb31d484ff84135d3a09f99c7ea2e30457",
    "0x0e90b023cee73af452156e3753f3a675499e723a191a07444756ddbd22c651b3",
    "0x295622cc65126802548b55509746bcda2ea97b6df2dce5b6f7f04b4d4db5fa48",
    "0x1bea95306232fc50c8311ba1cc1cef1d2ada96c5d66e51a5aae2ad1964acac1f",
    "0x020106b24d91fa6ea308834d0c12f2f7de5a20abbaefb49c42243a0205a1fa17",
    "0x265915f1efa6d40637549915f985c469f91c81ef80683bfe8cf6e47cfd776b20",
    "0x1d3bf5bea567cd281d08c65db035bb6a1416a10f8ad47e2bc45a63cf84bc3a6e",
    "0x1fa00fe619602049de8de422087992c991c71bdde7e01aa59ee15efc13418a5b",
    "0x092e8e06538c81029cbf6a80568df170477b5eb9b14433a7db2f38179ca2c608",
    "0x299e3d237ec88ff2ce376376ef8d37f71b301dd34e90b55f63cc0a1fcab2927b",
    "0x23160e9c5a4d9934419eb944a24eda9fe2877f4a56d32bcecb22cbe41040eefd",
    "0x0592b7b6ae44101fdd785d08ee2e51f14f850da4a9f3a5f27380a1ad95c37256",
    "0x02e37acbef2ee9e05d369e26398f60c648ed261370c12ed1e253040837e4ba93",
    "0x22da2df6b5f88cf73a9fa90f5638244873c3b6649343c743d3528f9794a8b89a",
    "0x2bbf92411c3dae94ca472d3dd296d606a43390d7dfa7476e59e9573a2359e3cd",
    "0x22a58ca4a89e625d2425aa2bba6a352c43e9c310ace68a534450dc673d859f29",
    "0x0ced1460d4ac849391891a7809dab48902eab3ebdcaefbf1e86d9f3221443bec",
    "0x0d01f990bafddf57d3d1eefd5ad62ebac8bf56b9b6500dff4e87e157f78f70e7",
    "0x16bebee688ab66175bb207ced01059095c6be8de83cae4c7d02d98062348dd05",
    "0x29d871852a1294bb1cb19bbaec380e1702be98b682b36cb84c6b291c2fc22ff7",
    "0x1cc703c55f0f6271c9da97385fdc9ed6954e19e3e57ccabe8faa060b854abbc7",
    "0x2c5104da102c5c6df4cdc98a03ff2b2a36eb412ebb9ef38d62306d78987526c8",
    "0x26be4baa250368859a9b6339ab924e398b22e4d5928b2a69415a740cd65e1ef9",
    "0x016c074529de65276eec7d2ca897e2f811a4fe316d1b0c3380ca7d1ada428d5e",
    "0x1f626435bda868b0428f3a13346426e2ac5897664053c6b65e68042739d3fd80",
    "0x0e0d2e5baf2b204717aa14a2e28e45a7da73f8eecad29b7ced5e9dd406a1e2a8",
    "0x1df8e624d875c65801d4cc102f5519126e75bb429cc86ce89b735c36dec32955",
    "0x05ace8808155be8e2aff66e04430376be5973b9a4e2bfae6e5eea35edcd0e7e1",
    "0x1ab9eba51c92e91335ad8c36c9b8ea3c0d3964725500b99e1c4c625e1a0d7b76",
    "0x003eacd2c717a4982b8c0be3b741aa03ace1a2950a98af9760023747f6f742d2",
    "0x1139138f31c7de918b3eef1e8257dde1a02193c597d2b593665c1d792c5fc080",
    "0x0d68c7a6ff391ff69d02f433e7eb94cc0bc43dd21cdcf5926ea80ce7890c5bc0",
    "0x3029c351ef38fa805177a1330f2afe48a3c11101099991468b3d0061ad294b90",
    "0x0aeb41bf2dd55a93fa27c2a4e60577625978c58a00aacdc745f4085bb8f90436",
    "0x0a51a07282dfe78a0a231b5d2712447522793ed3c97918e78e61195384aae30d",
    "0x132e4b3cfcfa342587107a6830d53b84664a7189dec91dd7e45a19d8563362ce",
    "0x07fc7842d10e4a1879db92973258b1c1c8db96eb4058290eefe8e1761ea46042",
    "0x095b72cf5b3d4911b3b8ad505a69541a4b18263afa3e69387e8bd4ca7ddf9c87",
    "0x02e39b7b09e7903c019e32e0d225128c0ff953f4c4411d91aec670b8e6fcbadb",
    "0x2ab61c6832ec0a175630df1e329ef6d59796e64e865cbf8612ff3190bee3fd0b",
    "0x160bd4844a0804af62173aa7b337e51d76f176b83c03f0b8705c33473880902a",
    "0x0af028a6969b415e96cce96fbc6d7b53d62b92923cfe6da20b9eb9107a51e402",
    "0x1a88f5aa2fe38e0ff7c8c87c96a90938515e1286507dc839e316e6bbd4cef268",
    "0x2a417387d879be9b7e6eb1461e9769959c417fbc0c6bdeb34d48ed053ae93ff7",
    "0x16ea1e4fc4ef326e26b770194dc0496e34fffba025197d247e8a8b9daac6c5f3",
    "0x231c88af704389dfa4eec5b99f22862dcfabf90c2ee6fd5c08e02503087d4bfe",
    "0x25abf4fb60e523d2e7b8705b5c0a968af3179a76e3e5642885d576e026e47bd3",
    "0x2bfadd79fd1ecbc20796271a598fe5d45087064fa0cb9f31ba3b2e0fe8afa583",
    "0x12da80517184b481fa96ea93b4017fed7ef8f30d50788248afe77b574de2f754",
    "0x24a6ceabeac123955c83c0bd51628a6799f1389ce5fe32b97840a6cc44afd483",
    "0x08f838fc75d585cb55ad7a49e679d9a3adbd7f2149a6c9c2b1957bb0864a0068",
    "0x0c455e315020abcf9bae523f2ed117300a6bf30ceeab0b639fd5c70b85691d7d",
    "0x1be13d220def7472a325cb4dec89eaaac4981d87b547339df9d0b8e3fafa4867",
    "0x2b04f327a4f6fe826ca6759dbff6817a7379dbf2387ebc0380de1924a5f0d6fe",
    "0x12191f7c9f49e4a11e7fc4a8788c6a9eda625eab65d0f6492707bc477de6dcbd",
    "0x235e6b5388b7ac634854f465049117f0a76e7588f77ae070a544753cc02ce9af",
    "0x2ae149e47d99aece87fb2ded76f415d779e80b765a88240ed0021f1c09b2eec5",
    "0x263103121c5980f492d9d873a89c84edec10b4859679248d86b1127015375dea",
    "0x199df7b527cfb44c885950a2340de3e3724126bfefd6bf508a24332d3c3c4bb9",
    "0x279a0ed83be82f0cd9ca4acb7013532e8449e29ab8dfabb6c66ee17fee93e086",
    "0x22d61e4a9cef26ae74900dbb905aa8adc2cd9ffe1c438f27f44b40d17bd10e0e",
    "0x117f407e7beee0c11e0905c4cfe2fd7415a863f237a81f2dd23c99fadca6b967",
    "0x2f8c34edfd1e9cddd464f67ad0dece5b87a821b5ea44fba1300931039736b41e",
    "0x0a3fe950979958693cd49c4da957d7a364c8e39113d3ccfe312fc69abb9cf311",
    "0x139d94f610430c517021e2fb0863c3e2c36156ea885301d43a97a3028a55697f",
    "0x1d9a683b467a7103e572a0dfd614ba18d3acfb0bff2a5d4b72f3d65ee6e99e60",
    "0x191f0b768021dfe5f1252950e58fb2dfeef0bb634a2d5e5482bf9d127c467175",
    "0x2c19a897b88030b3ad01d9af61cd08952c343a4949ebafa6139db2eebcf987d5",
    "0x18dbcdaa66fd7b3a59696edf2287d0d741abe85d2f7ff80c33dcab3c7a7719dc",
    "0x042b16aa6aac9106c75fecf3a27b08e9ab4df2e75bdac086163b15474eba84be",
    "0x1efd4567361e5c378ee882f5f155ba9482a0d240ef3ed6f67c793dbb17251d5d",
    "0x129b92a4782b6eadb20971fd208a7b0310c4e81cbc97a2d7df7b0aab5b533e91",
    "0x00403d04d771e01bb53cff979fd5d03591fc9c2acc450d2e7d1d688d41a540b1",
    "0x1b55b9068e49db1c1a687c9d12159dced6e1c043f0223741b4624ff909befe29",
    "0x1a232e91dee85bd7af1237d1cbef94c2e1ab6835153582bfdabb5906ab0fe21c",
    "0x26e29e5d8a18bbee56d98b7242b71675a3ba215b9fbcb16eae5ed2ee66ab3ef1",
    "0x05eb5e911d9c6b2e03a4b094cb51d21e914152eec2d9700787f99c15cdd9e6d9",
    "0x0d1adcb64ba5190772c4bcae9454e217cab47a3e742e6f74a24c2887f0e61d3a",
    "0x25a1e7fdcf66c32e0ca34d1c8c03d2dae3fd03c8016bde381f70f97655fc0180",
    "0x27988e6c99f670a1b76f4e4fe6a01397397e9805eb3dc6880d3d630da7582b3f",
    "0x2b09a71cad9562c9662a48df68c34775e4b9778a9b32984329ac1c43b5bde732",
    "0x06e7134c57349b2490949b22ec8c91506745751cd164b20ab38f7bd59e5697b1",
    "0x093426b967310076d2fcfa1f5b0d5d16e8319c6baddc9ca2b2092f40e22df072",
    "0x29309a9a329bf9ce163bebac9e524b8b1c9927078f253078c774f09b35ac4dea",
    "0x1a86f136be16900b9f103db1ce7c16148b12cff7db26d689873abde4cf76be7c",
    "0x0558c330b72e8e4aaabb2330a37547be0fe9351d2d38891c386f3bec62118a79",
    "0x25c37cc5bb4f6b754e22282f621c4b498c3b9075cd3cdd4784f93a0e81c64ea9",
    "0x06c9177cf96e954c24bb3723d6002d6f33924c11e52cd75009e9e4414f14aa9c",
    "0x12cf4475a0dee711f3979426bec56c8aa883282874fce0d97464c0939011a841"
  ];
});


// Initialize the endpoint
const baseEndpoint = __ENV.TREE_AVAILABILITY_SERVICE_ENDPOINT;
if (!baseEndpoint) {
  throw new Error('Base endpoint not specified. Use -e TREE_AVAILABILITY_SERVICE_ENDPOINT=your_endpoint');
}
const endpoint = `${baseEndpoint}/inclusionProof`;

export default function () {
  const identityCommitment = identityCommitments[Math.floor(Math.random() * identityCommitments.length)];

  // Construct the request body
  const body = JSON.stringify({
    identityCommitment: identityCommitment,
  });

  // Send the request
  const res = http.post(endpoint, body, {
    headers: { 'Content-Type': 'application/json' },
  });

  // Check the response status
  check(res, { 'status was 200': (r) => r.status === 200 });

  // Check if proof value is present
  const responseData = JSON.parse(res.body);
  check(responseData, { 'proof is present': (data) => data.proof !== undefined && data.proof !== null });
}
